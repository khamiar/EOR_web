<div class="layout-container">
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="!isSidebarOpen">
    <div class="sidebar-header">
      <h2>{{ isSidebarOpen ? 'EO Reporter' : 'EO' }}</h2>
      <button class="toggle-btn" (click)="toggleSidebar()">
        <span class="material-icons">
          {{ isSidebarOpen ? 'chevron_left' : 'chevron_right' }}
        </span>
      </button>
    </div>
    
    <nav class="sidebar-nav">
      <ng-container *ngFor="let item of menuItems">
        <!-- Logout -->
        <a *ngIf="item.action === 'logout'" 
           (click)="logout()" 
           class="nav-item"
           type="button">
          <span class="material-icons">{{ item.icon }}</span>
          <span *ngIf="isSidebarOpen" class="nav-text">{{ item.title }}</span>
        </a>
      
        <!-- Regular links with conditional badges -->
        <a *ngIf="!item.action" 
           [routerLink]="item.route" 
           routerLinkActive="active"
           class="nav-item">
          <span class="material-icons">{{ item.icon }}</span>
          <span *ngIf="isSidebarOpen" class="nav-text">
            {{ item.title }}
            <span *ngIf="item.title === 'Feedback Manager' && hasNewFeedback" class="dot"></span>
            <span *ngIf="item.title === 'Announcements' && hasNewAnnouncement" class="dot"></span>
            <span *ngIf="item.title === 'Outages Manager' && hasNewOutage" class="dot"></span>
          </span>
        </a>
        <!-- <div class="user-info">
        <button mat-button  class="profile-button">
          <span class="material-icons">account_circle</span>
          <span class="user-name">Name: {{ currentUser?.fullName || 'Loading...' }}</span>
          <span class="user-name">Role: {{currentUser?.role || 'Loading...' }}</span>
        </button>
      </div> -->
      </ng-container>
      
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <header class="top-bar">
      <div class="user-info">
        <button mat-button  class="profile-button">
          <span class="material-icons">account_circle</span>
          <span class="user-name">Name: {{ currentUser?.fullName + ' Role: ' + currentUser?.role || 'Loading...' }}</span>
        </button>
      </div>
    </header>
    
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </main>
</div> 